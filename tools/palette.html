<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Interactive Dark Shades Palette</title>
  <style>
    :root {
      --bg: 176, 204, 84; /* Initial background RGB */
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: rgb(var(--bg));
      min-height: 100vh;
      color: white;
      display: grid;
      place-items: center;
    }
    .app {
      width: min(960px, 94vw);
      backdrop-filter: blur(6px);
      background: rgba(0,0,0,.25);
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
    }
    h1 { margin: 0 0 8px; font-size: 22px; font-weight: 700; }
    p { margin: 0 0 16px; opacity: .9; }

    .controls {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px 18px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 18px;
    }
    .stack { display: grid; gap: 10px; }
    .row { display: grid; grid-template-columns: 60px 1fr 68px; gap: 10px; align-items: center; }
    label { font-weight: 600; font-size: 12px; letter-spacing: .02em; opacity: .95; }
    input[type="range"] { width: 100%; }
    input[type="number"] {
      width: 100%;
      border: 1px solid rgba(255,255,255,.25);
      background: rgba(0,0,0,.25);
      color: white;
      padding: 8px 10px;
      border-radius: 10px;
      font-size: 14px;
    }

    .palette { display: grid; grid-template-columns: repeat(3, 1fr); gap: 14px; }
    .shade {
      height: 140px;
      border-radius: 12px;
      display: grid;
      align-content: end;
      padding: 12px;
      box-shadow: 0 6px 18px rgba(0,0,0,.35) inset, 0 6px 18px rgba(0,0,0,.25);
    }
    .chip {
      background: rgba(0,0,0,.45);
      border: 1px solid rgba(255,255,255,.18);
      padding: 8px 10px;
      border-radius: 10px;
      font-size: 12px;
      display: inline-block;
    }
    .grid-info { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 10px; }
    .badge { background: rgba(255,255,255,.08); border: 1px solid rgba(255,255,255,.15); padding: 8px 10px; border-radius: 10px; font-size: 12px; text-align: center; }
    .bar { height: 8px; border-radius: 6px; background: rgba(255,255,255,.2); overflow: hidden; }
    .bar > i { display: block; height: 100%; background: rgba(255,255,255,.85); }

    .footer { margin-top: 14px; font-size: 12px; opacity: .9; }
    .btn {
      appearance: none; border: 1px solid rgba(255,255,255,.25); background: rgba(0,0,0,.25); color: white;
      padding: 10px 12px; border-radius: 10px; font-weight: 600; cursor: pointer;
    }
    .btn:active { transform: translateY(1px); }

    @media (max-width: 720px) {
      .controls { grid-template-columns: 1fr; }
      .palette { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="app">
    <h1>Interactive Dark Shades Palette</h1>
    <p>Pick a <strong>background RGB</strong>. The three dark shades update automatically and keep a hint of the same hue (green if present). All values are shown in <strong>rgb(r, g, b)</strong>.</p>

    <div class="controls">
      <div class="stack">
        <label>Background RGB</label>
        <div class="row">
          <span>R</span>
          <input id="r" type="range" min="0" max="255" value="176" />
          <input id="rNum" type="number" min="0" max="255" value="176" />
        </div>
        <div class="row">
          <span>G</span>
          <input id="g" type="range" min="0" max="255" value="204" />
          <input id="gNum" type="number" min="0" max="255" value="204" />
        </div>
        <div class="row">
          <span>B</span>
          <input id="b" type="range" min="0" max="255" value="84" />
          <input id="bNum" type="number" min="0" max="255" value="84" />
        </div>
        <button class="btn" id="reset">Reset to rgb(176, 204, 84)</button>
      </div>

      <div class="stack">
        <label>Live Values</label>
        <div class="badge" id="bgOut">rgb(176, 204, 84)</div>
        <div class="grid-info">
          <div class="badge" id="s1Out">rgb(89, 113, 42)</div>
          <div class="badge" id="s2Out">rgb(44, 63, 25)</div>
          <div class="badge" id="s3Out">rgb(15, 22, 10)</div>
          <div class="badge" id="hslOut">HSL (derived)</div>
        </div>
        <div class="bar"><i id="lBar" style="width: 50%"></i></div>
      </div>
    </div>

    <div class="palette">
      <div class="shade" id="shade1"><span class="chip" id="chip1">rgb(89, 113, 42)</span></div>
      <div class="shade" id="shade2"><span class="chip" id="chip2">rgb(44, 63, 25)</span></div>
      <div class="shade" id="shade3"><span class="chip" id="chip3">rgb(15, 22, 10)</span></div>
    </div>

    <div class="footer">Tip: The darkest sample stays near-black but preserves a hint of your hue by lowering lightness while keeping hue/saturation.</div>
  </div>

  <script>
    // --- Color helpers
    const clamp01 = (x) => Math.min(1, Math.max(0, x));
    const clamp255 = (x) => Math.min(255, Math.max(0, Math.round(x)));

    function rgbToHsl(r, g, b) {
      r /= 255; g /= 255; b /= 255;
      const max = Math.max(r, g, b), min = Math.min(r, g, b);
      let h, s, l = (max + min) / 2;
      if (max === min) { h = 0; s = 0; }
      else {
        const d = max - min;
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
        switch (max) {
          case r: h = (g - b) / d + (g < b ? 6 : 0); break;
          case g: h = (b - r) / d + 2; break;
          case b: h = (r - g) / d + 4; break;
        }
        h /= 6;
      }
      return { h, s, l };
    }

    function hslToRgb(h, s, l) {
      let r, g, b;
      if (s === 0) { r = g = b = l; }
      else {
        const hue2rgb = (p, q, t) => {
          if (t < 0) t += 1;
          if (t > 1) t -= 1;
          if (t < 1/6) return p + (q - p) * 6 * t;
          if (t < 1/2) return q;
          if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
          return p;
        };
        const q = l < .5 ? l * (1 + s) : l + s - l * s;
        const p = 2 * l - q;
        r = hue2rgb(p, q, h + 1/3);
        g = hue2rgb(p, q, h);
        b = hue2rgb(p, q, h - 1/3);
      }
      return { r: clamp255(r * 255), g: clamp255(g * 255), b: clamp255(b * 255) };
    }

    function fmtRGB({r,g,b}) { return `rgb(${r}, ${g}, ${b})`; }

    // Compute three dark shades preserving hue; adjust saturation upward a bit if needed
    function computeShades(r, g, b) {
      const { h, s, l } = rgbToHsl(r, g, b);
      const sBase = Math.max(s, 0.18); // ensure some hue presence
      const s1 = clamp01(sBase * 1.1);
      const s2 = clamp01(sBase * 1.2);
      const s3 = clamp01(sBase * 1.25);
      const l1 = 0.30; // lightest dark
      const l2 = 0.20; // middle dark
      const l3 = 0.08; // near-black with hue
      const c1 = hslToRgb(h, s1, l1);
      const c2 = hslToRgb(h, s2, l2);
      const c3 = hslToRgb(h, s3, l3);
      return [c1, c2, c3];
    }

    // --- DOM
    const rRange = document.getElementById('r');
    const gRange = document.getElementById('g');
    const bRange = document.getElementById('b');
    const rNum = document.getElementById('rNum');
    const gNum = document.getElementById('gNum');
    const bNum = document.getElementById('bNum');
    const resetBtn = document.getElementById('reset');

    const bgOut = document.getElementById('bgOut');
    const s1Out = document.getElementById('s1Out');
    const s2Out = document.getElementById('s2Out');
    const s3Out = document.getElementById('s3Out');
    const hslOut = document.getElementById('hslOut');
    const lBar = document.getElementById('lBar');

    const shade1 = document.getElementById('shade1');
    const shade2 = document.getElementById('shade2');
    const shade3 = document.getElementById('shade3');
    const chip1 = document.getElementById('chip1');
    const chip2 = document.getElementById('chip2');
    const chip3 = document.getElementById('chip3');

    function setBG(r, g, b) {
      document.documentElement.style.setProperty('--bg', `${r}, ${g}, ${b}`);
      const rgbTxt = `rgb(${r}, ${g}, ${b})`;
      bgOut.textContent = rgbTxt;
    }

    function syncInputs(src) {
      const r = src === 'range' ? Number(rRange.value) : Number(rNum.value);
      const g = src === 'range' ? Number(gRange.value) : Number(gNum.value);
      const b = src === 'range' ? Number(bRange.value) : Number(bNum.value);
      // mirror values
      rRange.value = rNum.value = r;
      gRange.value = gNum.value = g;
      bRange.value = bNum.value = b;
      update(r, g, b);
    }

    function update(r, g, b) {
      setBG(r, g, b);
      const [c1, c2, c3] = computeShades(r, g, b);
      const hsl = rgbToHsl(r, g, b);
      hslOut.textContent = `HSL ${[hsl.h.toFixed(2), hsl.s.toFixed(2), hsl.l.toFixed(2)].join(', ')}`;
      lBar.style.width = `${Math.round(hsl.l * 100)}%`;

      const rgb1 = fmtRGB(c1), rgb2 = fmtRGB(c2), rgb3 = fmtRGB(c3);
      shade1.style.background = rgb1; chip1.textContent = rgb1; s1Out.textContent = rgb1;
      shade2.style.background = rgb2; chip2.textContent = rgb2; s2Out.textContent = rgb2;
      shade3.style.background = rgb3; chip3.textContent = rgb3; s3Out.textContent = rgb3;
    }

    // Events
    rRange.addEventListener('input', () => syncInputs('range'));
    gRange.addEventListener('input', () => syncInputs('range'));
    bRange.addEventListener('input', () => syncInputs('range'));
    rNum.addEventListener('input', () => syncInputs('number'));
    gNum.addEventListener('input', () => syncInputs('number'));
    bNum.addEventListener('input', () => syncInputs('number'));
    resetBtn.addEventListener('click', () => { rRange.value = rNum.value = 176; gRange.value = gNum.value = 204; bRange.value = bNum.value = 84; syncInputs('range'); });

    // Init
    update(176, 204, 84);
  </script>
</body>
</html>
